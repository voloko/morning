(function(){function b(e){if(!d[e]){var f=d[e]={exports:{}};c[e].call(f.exports,a,f,b)}return d[e].exports}var a=this,c=b.modules=[],d=b.cache=[],e="body {margin: 0; padding: 0;}\nbody, tr, input, textarea {font-family: sans-serif; font-size: 14px;}\na:link, a:visited {text-decoration: none; color: #3B5998; -webkit-tap-highlight-color: rgba(128, 128, 128, 0.5);}\n.clear {clear: both;}\n.test {background: red;}\n.hidden {display: none !important;}\n\n.m-navbar {background-color: #3B5998; border-bottom: 1px solid #1D4088; height: 40px; background: -webkit-linear-gradient(top, #3B5998 0%,#37538d 86%,#38548e 100%); position: relative;}\n.m-navbar-back {display: block; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAARCAMAAADT/c3XAAAAXVBMVEUPL3////8PL3////8nQ4wPL3/8/f3///8uSpD7/P3///8PL3/6+/zt8PX19vlXbaUfPYgqR44PL3////82UJT3+Pv6+/wdO4f////5+vz////J0eLV2ujj5/Cirs28IRXFAAAAGnRSTlMAABUb1h7hKuXrFQzfubnpr7ecJ7q308mx7cGIWioAAABKSURBVHhebcZHFoAwCAXAby+xd4l6/2NKnoGFOqvBIxyMLL5W43eQ7WREta7I/ofebR/BGmJt4hpV3DP/Pn1/gn6GfCnhv/ECdQOhXAbwdz+L6AAAAABJRU5ErkJggg==) no-repeat 18px 50%; position: absolute; width: 55px; height: 100%; *background-image: url(/app/view/navbar/back.png);}\n.m-navbar-title {display: block; padding-top: 3px; margin-left: 45px; padding-left: 10px; border-left: 1px solid #1D4088; line-height: 37px; font-size: 16px; color: #FFF; font-weight: bold; text-shadow: 0 -1px 0 #1D4088;}\n\n\n.m-post {position: relative; min-height: 40px; padding: 5px 8px 7px 5px; border-bottom: 1px solid #EEE; background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(86%,#f4f4f4), color-stop(100%,#f9f9f9));}\n.m-post {background: -webkit-linear-gradient(top, #ffffff 0%,#f4f4f4 86%,#f9f9f9 100%);}\n.m-post a {word-break: break-word;}\n.m-post_with_icon {min-height: 20px;}\n.m-post-from-pic {width: 34px; height: 34px; position: absolute;}\n.m-post-from-icon {width: 16px; height: 16px; left: 18px; position: absolute;}\n.m-post-content {margin-left: 40px; margin-right: 30px;}\n.m-post-actor {font-weight: bold;}\n.m-post-actions .m-timestamp {margin: 3px 0;}\n.m-post-more {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTZDMzVBRTVBOUY4MTFFMDg3NjRDM0Q3MEI1MkQ5OTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTZDMzVBRTZBOUY4MTFFMDg3NjRDM0Q3MEI1MkQ5OTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxNkMzNUFFM0E5RjgxMUUwODc2NEMzRDcwQjUyRDk5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxNkMzNUFFNEE5RjgxMUUwODc2NEMzRDcwQjUyRDk5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PndpT8sAAAIjSURBVHjarJVNaxNBGMf/u1mTovUtUrpW/BrFWsGjH6CN4k1sUI9eFA8ePYhe/AK+IUoOUSwUoccerYpIvQmCYjQxpu2+JOlkZ2ecmSTrbvbFEvrAH4bd5/nxf/aZ2dE459jL0CTw9oPVs2J9T2h2TM660M0718+tGTfuvkS+cKAyYxbNQ5P7x6LZbmf2Z32zIpbHDfmAcW7qmgHLIZHE7k4XhXwBuq5nAnO6oRhyrTJl257vi4cskNt2cXRSg7XdAvVp5N2oZO1wFn0g4zFNFydwefE0lkqnYFub8KmfmBdWABR2wRiLqEN0NLc6mJk+gnJpDo69BUppLC9Q1CGDP6Iu8VB5s4FGy+1Dz8+h07bgCaifkC8ZmQ6lSI/ixcoG6n/60CXhlHSdZKdhh6ltKKiH5yuf8KvpBNAecROhARDKYboIoaiufhatcQW9cmFeDIlEcjBwaIRbTgu5JdptZ1CkiXwN+/ITwuW/GhYGygKWcqbV/mIEl0rzyOV01H7beLb8ET3Pj+cFDkPfYDRJ5z1cvXgG5tRh1Bo2nr7+EIMNGZlACctpNID9aFh48up9IiwGHA4mcj4F7NoQVpewd6mwcAwccrU5w3HyxDFMFQ8q2MPq2//CGAsPRbbsR4Ffv7fwqLougNu7csYj35CzmEMZX741d/1PlAy1se/fWpB2azuEZJ6YLPVreS085bJtu4/F0hzzCqgLlYM7ZS/jrwADAAJqSNIR0ltTAAAAAElFTkSuQmCC) no-repeat 50% 50%; position: absolute; right: 5px; top: 50%; width: 20px; height: 22px; margin-top: -11px; padding: 3px; *background-image: url(/app/view/post/more.png);}\n\n.m-post-attch {margin: 5px 0; font-size: 12px;}\n.m-post-attch-media {padding: 2px; border: 1px solid #CCC; margin-bottom: 2px;}\n.m-post-attch-name {font-weight: bold;}\n.m-post-attch-caption {margin-top: 2px; color: #777;}\n.m-post-attch .m-image-block-left {margin-right: 7px;}\n.u-post-attch_without-media {border-left: 2px solid #CCC; padding-left: 7px;}\n.u-post-attch_multi-media .m-post-attch-content {clear: both; border-left: 2px solid #CCC; padding-left: 7px; display: block; margin-top: 6px;}\n\n.m-image-block {position: relative;}\n.m-image-block-left {display: block; float: left; margin-right: 4px;}\n.m-image-block-content {display: table-cell;}\n.m-image-block-ext {float: right;}\n\n.m-timestamp {font-size: 12px; color: #888;}\n\n.m-post-counts {display: inline-block;}\n.m-post-counts-nub {height: 7px; overflow: hidden; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAVUlEQVR42pWLIQ6AUBTD3v3PhUSDxROCwQ++eJiVJYiarS1JxnFeoh3FxmQWOTAxBSamwMTEb9mY5kW0o7huuyio52haHHQweH8SPwMTU2BiCopP5gYrtwZFWfUUlwAAAABJRU5ErkJggg==) no-repeat 9px 0; width: 20px; *background-image: url(/app/view/post/nub.png);}\n.m-post-counts-bar {background: #EDEFF4; color: #3B5998; border-bottom: 1px solid #E5EAF1; padding: 4px 9px 4px 9px; border-top: 1px solid #EDEFF4; font-weight: bold; font-size: 12px;}\n.m-post-counts-likes + .m-post-counts-comments {margin-left: 12px;}\n.m-post-counts-likes {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAAmElEQVQokWP4//8/A6mYILCOnPEfiG8SVonQsBlo8n+riGl3gFxBYjWB9IBs+k+UJqDChrLu7ciaRIi2BaYJCc8EuxtN8D+yBnQAthVETFx0FIzxKcbQBHI7CA8BTTAM4h85+wBDk1X41AsYoSevH6AGwkbejdEWIRMWIsuBNCibRunAooUPGnkwzATFbEDMgyYnQHIKB2EA0kuS9wIszA0AAAAASUVORK5CYII=) no-repeat 0 50%; padding-left: 17px; *background-image: url(/app/view/post/like.png);}\n.m-post-counts-comments {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAlUlEQVQoz2P4//8/AymYgfYarKOmbALi/1ZAbI2ErdDYUP4mkIb/D56+///k5Ue8GKQGpJYBpPPstWdEYbAGa1pqsCLPhmgSNZDsaUO/uk1A/N/Qt/a/ARAb+tZhuBskB1YDVMsABEJALI6MQZIoHkXIgdQyMNy4/xoFgyRBtsE0IInjBWBN1hAbEABvQmNgEABhZDEAGJb95V+ytHQAAAAASUVORK5CYII=) no-repeat 0 50%; padding-left: 17px; *background-image: url(/app/view/post/comment.png);}\n\n.m-navbar-loading {padding-left: 10px; line-height: 40px; font-size: 14px; border: 1px solid #CCC; border-left: none; border-right: none;}\n.m-navbar-loading-loader {display: inline-block; background: url(data:image/gif;base64,R0lGODlhEAALALMMAOXp8a2503CHtOrt9L3G2+Dl7vL0+J6sy4yew1Jvp/T2+e/y9v///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCwAMACwAAAAAEAALAAAEK5DJSau91KxlpObepinKIi2kyaAlq7pnCq9p3NZ0aW/47H4dBjAEwhiPlAgAIfkECQsADAAsAAAAAAQACwAABA9QpCQRmhbflPnu4HdJVAQAIfkECQsADAAsAAAAABAACwAABDKQySlSEnOGc4JMCJJk0kEQxxeOpImqIsm4KQPG7VnfbEbDvcnPtpINebJNByiTVS6yCAAh+QQJCwAMACwAAAAAEAALAAAEPpDJSaVISVQWzglSgiAJUBSAdBDEEY5JMQyFyrqMSMq03b67WY2x+uVgvGERp4sJfUyYCQUFJjadj3WzuWQiACH5BAkLAAwALAAAAAAQAAsAAAQ9kMlJq73hnGDWMhJQFIB0EMSxKMoiFcNQmKjKugws0+navrEZ49S7AXfDmg+nExIPnU9oVEqmLpXMBouNAAAh+QQFCwAMACwAAAAAEAALAAAEM5DJSau91KxlpOYSUBTAoiiLZKJSMQzFmjJy+8bnXDMuvO89HIuWs8E+HQYyNAJgntBKBAAh+QQFFAAMACwMAAIABAAHAAAEDNCsJZWaFt+V+ZVUBAA7) 0 0; width: 16px; height: 11px; margin-left: 5px; *background-image: url(/app/view/stream/indicator_blue_small.gif);}\n\n.m-navbar-more {display: block; padding-left: 10px; line-height: 40px; font-size: 14px; font-weight: bold; border: 1px solid #CCC; border-left: none; border-right: none;}\n.m-navbar-more-loader {display: none;}\n.m-navbar-more_loading .m-navbar-more-loader {display: inline-block; background: url(data:image/gif;base64,R0lGODlhEAALALMMAOXp8a2503CHtOrt9L3G2+Dl7vL0+J6sy4yew1Jvp/T2+e/y9v///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCwAMACwAAAAAEAALAAAEK5DJSau91KxlpObepinKIi2kyaAlq7pnCq9p3NZ0aW/47H4dBjAEwhiPlAgAIfkECQsADAAsAAAAAAQACwAABA9QpCQRmhbflPnu4HdJVAQAIfkECQsADAAsAAAAABAACwAABDKQySlSEnOGc4JMCJJk0kEQxxeOpImqIsm4KQPG7VnfbEbDvcnPtpINebJNByiTVS6yCAAh+QQJCwAMACwAAAAAEAALAAAEPpDJSaVISVQWzglSgiAJUBSAdBDEEY5JMQyFyrqMSMq03b67WY2x+uVgvGERp4sJfUyYCQUFJjadj3WzuWQiACH5BAkLAAwALAAAAAAQAAsAAAQ9kMlJq73hnGDWMhJQFIB0EMSxKMoiFcNQmKjKugws0+navrEZ49S7AXfDmg+nExIPnU9oVEqmLpXMBouNAAAh+QQFCwAMACwAAAAAEAALAAAEM5DJSau91KxlpOYSUBTAoiiLZKJSMQzFmjJy+8bnXDMuvO89HIuWs8E+HQYyNAJgntBKBAAh+QQFFAAMACwMAAIABAAHAAAEDNCsJZWaFt+V+ZVUBAA7) 0 0; width: 16px; height: 11px; margin-left: 5px; *background-image: url(/app/view/stream/indicator_blue_small.gif);}\n";c[0]=function(a,b,c){var d=this;1;var f=a.app={},g={};f.init=function(){var a=c(1);document.head.appendChild(a({tag:"style",text:e})),document.body.appendChild(a({fragment:!0,children:[{view:c(4),as:"navbar",title:"Facebook"},{view:c(5),as:"stream"}]},g))},f.run=function(){c(17).fetchHome({limit:25},function(a){g.stream.appendPosts(a),setTimeout(function(){window.scrollTo(0,1)},1)})}},c[1]=function(a,b,c){function j(a){return a.fragment?document.createDocumentFragment():a.tag?document.createElement(a.tag):a.text?document.createTextNode(a.text):document.createElement("div")}function i(a){var b=e.is.string(a.view)?h[a.view]:a.view;return new b(a)}function h(a,b){if(e.is.view(a)||e.is.node(a))return a;var c=a.view?i(a):j(a);for(var d in a){var f=a[d];switch(d){case"tag":case"fragment":break;case"as":b&&(b[f]=c);break;case"aslist":b&&(b[f]?b[f]=[c]:b[f].push(c));break;case"children":f.forEach(function(a){if(a){var d=h(a,b);c.appendChild(d.dom||d)}});break;case"listeners":case"on":for(var g in f)c.addEventListener(g,f[g]);break;case"text":f&&c.nodeType!=3&&c.appendChild(h({text:f}));break;case"style":c.style.cssText=f;break;default:c[d]=f}}return c}var d=this,e=c(2),f=c(3),g=Object.prototype.toString;h.nearest=function(a){while(a){if(a["data-view"])return a["data-view"];a=a.parentNode}return null};var k=h.Base=function(a){this._setup(a),this._createDom(a),this._init()},l=k.prototype;Object.defineProperty(l,"isView",{value:!0,configurable:!0,enumerable:!0}),l.dom=null,["className","parentNode","children","innerHTML","scrollLeft","scrollTop","firstChild","lastChild","nextSibling","prevSibling"].forEach(function(a){e.delegate.prop(l,a,"dom")}),e.delegate.prop(l,"style","dom","style",{get:undefined}),e.delegate.call(l,"getBoundingClientRect","dom"),l._setup=function(a){},l.defaultClassName="",l._createDom=function(a){this.dom=h({tag:a.tag||"div"}),this.defaultClassName&&(this.className=this.defaultClassName)},l._init=function(){this.dom["data-view"]=this},e.delegate.call(l,"addEventListener","dom"),e.delegate.call(l,"removeEventListener","dom"),l.trigger=function(a){var b=document.createEvent("UIEvents");b.type=a.type,canBubble in a&&(b.canBubble=a.canBubble),cancelable in a&&(b.cancelable=a.cancelable),b.data=a.data,this.dom.dispatchEvent(b)},l.appendChild=function(a){this.dom.appendChild(a.dom||a);return a},l.removeChild=function(a){this.dom.removeChild(a.dom||a);return a},l.insertBefore=function(a,b){this.dom.insertBefore(a.dom||a,b.dom||b);return a},l.replaceChild=function(a,b){this.dom.replaceChild(a.dom||a,b.dom||b);return b},Object.defineProperty(l,"childViews",{configurable:!0,enumerable:!0,get:function(){return this.children.filter(function(a){return e.is.view(a)})}}),Object.defineProperty(l,"parentView",{configurable:!0,enumerable:!0,get:function(){return h.nearest(this.parentNode)}}),Object.defineProperty(l,"model",{configurable:!0,enumerable:!0,get:function(){return this._binding&&this._binding.model},set:function(a){this.bindModel(a)}}),l.defaultBindingOptions={},l.bindModel=function(a,b){this._binding&&this._binding.destruct(),a?(b=e.extend(this.defaultBindingOptions,b),b.model=a,b.view=this,this._binding=new f.Binding(b)):this._binding=null},k.createClass=function(){return e.createClass(k)},b.exports=h},c[2]=function(a,b,c){function k(a){return a.trim().replace(/\s{2,}/g," ")}function i(){}function h(a,b,c){var d;return function(){var e=this,f=arguments;c&&d&&(d=clearTimeout(d)),d=d||setTimeout(function(){d=null,a.apply(e,f)},b)}}function f(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var d=this,e={guid:1};e.escapeHTML=f,e.extend=function(){var a=arguments[0]||{};for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c||{})c[d]!==undefined&&(a[d]=c[d])}return a};var g=Array.prototype.slice;e.bind=function(a,b){if(a.bind)return a.bind.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return c.length?function(){return a.apply(b||this,c.concat(g.call(arguments,0)))}:function(){return a.apply(b||this,arguments)}},e.bindOnce=function(a,b){a.huid=a.huid||e.guid++;var c="__bind_"+a.huid;b[c]=b[c]||e.bind(a,b);return b[c]},e.throttle=function(a,b){return h(a,b)},e.debounce=function(a,b){return h(a,b,!0)},e.createClass=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.createClass=e.bind(e.createClass,e,b);return b};var j=e.cls={has:function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1},add:function(a,b){var c=a.className;b.split(/\s+/).forEach(function(b){j.has(a,b)||(c+=" "+b)}),a.className=k(c)},remove:function(a,b){var c=a.className;b.split(/\s+/).forEach(function(a){c=c.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g")," ")}),a.className=k(c)},toggle:function(a,b,c){arguments.length<3&&(c=!j.has(a,b)),c?j.add(a,b):j.remove(a,b)}};e.delegate={prop:function(a,b,c,d,f){d=d||b,Object.defineProperty(a,b,e.extend({configurable:!0,enumerable:!0,set:function(a){this[c][d]=a},get:function(){return this[c][d]}},f))},call:function(a,b,c,d){d=d||b,a[b]=function(){return this[c][d].apply(this[c],arguments)}}},e.alias={prop:function(a,b,c){Object.defineProperty(a,c,{configurable:!0,enumerable:!0,get:function(){return this[b]},set:function(a){this[b]=a}})}},e.is={view:function(a){return!!a&&!!a.isView},node:function(a){return!!(a&&"nodeType"in a)},element:function(a){return!!a&&a.nodeType==1}},[["fun","Function"],["array","Array"],["bool","Boolean"],["number","Number"],["string","String"],["date","Date"],["number","Number"]].forEach(function(a){var b="[object "+a[1]+"]";e.is[a[0]]=function(a){return Object.prototype.toString.call(a)===b}}),b.exports=e},c[3]=function(a,b,c){var d=this,e=c(2),f={};f.Observable={addEventListener:function(a,b){this._listeners||(this._listeners={}),this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push(b)},removeEventListener:function(a,b){if(!a)delete this._listeners;else{var c=this._listeners;c&&c[a]&&(c[a]=b?c[a].filter(function(a){return a!==b}):[])}},trigger:function(a){if(!this.muteEvents){var b=a.type,c=this._listeners;c&&c[b]&&c[b].forEach(function(b){b.call(this,a)},this)}},destruct:function(){delete this._listeners},muteEvents:!1},f.defineProperty=function(a,b,c){a.propNames.push(b),Object.defineProperty(a,b,e.extend({configurable:!0,enumerable:!0,set:function(a){var c=this[b];this.propValues[b]=a,c!=a&&this.triggerChanges(b)},get:function(){return this.propValues[b]}},c))},f.defineProperties=function(a,b){for(var c in b)f.defineProperty(a,c,b[c])};var g=f.Base=function(a){this.propValues={},a&&e.extend(this,a)},h=g.prototype;e.extend(h,f.Observable),h.propValues={},h.propNames=[],h.triggerChanges=function(a){this.muteChanges||(this.trigger({type:"change."+a,model:this}),this.trigger({type:"change",name:a,model:this}))},h.muteChanges=!1,f.defineProperty(h,"id"),f.Binding=function(a){e.extend(this,a),a.view&&a.model&&(this.modelEvent||(this.modelEvent="change."+this.modelProp),this.modelProp&&this.view.addEventListener(this.viewEvent,e.bindOnce(this.updateModel,this)),this.model.addEventListener(this.modelEvent,e.bindOnce(this.updateView,this)),this.updateView())},e.extend(f.Binding.prototype,{modelProp:"value",viewProp:"value",modelEvent:"",viewEvent:"blur",destruct:function(){this.view&&this.model&&(this.modelProp&&this.view.removeEventListener(this.viewEvent,e.bindOnce(this.updateModel,this)),this.model.removeEventListener(this.modelEvent,e.bindOnce(this.updateView,this)))},updateModel:function(a){this._lockUpdate(function(){this.model[this.modelProp]=this.view[this.viewProp]})},updateView:function(a){this._lockUpdate(function(){this.view[this.viewProp]=this.modelProp?this.model[this.modelProp]:this.model})},_lockUpdate:function(a){if(!this._updating){this._updating=!0;try{a.call(this)}catch(b){this._updating=!1;throw b}this._updating=!1}}}),g.createClass=function(){var a=e.createClass(this);a.prototype.propNames=[].concat(g.prototype.propNames),a.createClass=e.bind(this.createClass,this,a);return a},b.exports=f},c[4]=function(a,b,c){var d=this;1;var e=c(1),f=c(2),g=b.exports=e.Base.createClass(),h=g.prototype;h.defaultClassName="m-navbar",h._createDom=function(){this.refs={},this.dom=e({tag:"div",className:h.defaultClassName,children:[{tag:"a",href:"#",className:"m-navbar-back",as:"back"},{tag:"div",className:"m-navbar-title",as:"title"},{tag:"div",className:"m-navbar-menu",as:"menu"}]},this.refs)},Object.defineProperty(h,"title",{set:function(a){this.refs.title.innerHTML="",this.refs.title.appendChild(e({text:a}))},get:function(){return this.refs.title.innerHTML}})},c[5]=function(a,b,c){var d=this;1;var e=c(1),f=c(2),g=c(6),h=e.Base.createClass(),i=h.prototype;i.defaultClassName="m-steam",i._createDom=function(){this.refs={},this.dom=e({tag:"div",className:this.defaultClassName,children:[{view:c(15),as:"loading"},{view:c(16),as:"more"}]},this.refs),f.cls.add(this.refs.more,"hidden")},i._setup=function(){this.posts=[]},i.appendPosts=function(a){this.posts=this.posts.concat(a),this.insertBefore(e({fragment:!0,children:a.map(function(a){return{view:g,value:a}})}),this.refs.more),f.cls.add(this.refs.loading,"hidden"),f.cls.remove(this.refs.more,"hidden")},b.exports=h},c[6]=function(a,b,c){function i(a){return"//graph.facebook.com/"+a+"/picture"}var d=this;1;var e=c(1),f=c(2),g=b.exports=c(7).createClass(),h=g.prototype;h.defaultClassName="m-post",h.composeFrom=function(){f.cls.add(this,"m-post_with-icon",!this.value.message);if(this.value.actor)return e({tag:"img",className:"m-post-from-pic",src:this.value.actor.pic_square},this);var a=this.value.attachment;return a&&a.icon&&e({tag:"img",className:"m-post-from-icon",src:a.icon},this)},h.composeContent=function(){var a=this.value.attachment;return e({tag:"div",className:"m-post-content",children:[this.composeVoice(),{text:" "},this.composeMessage(),a.media&&{view:c(8),value:this.value.attachment},{tag:"div",className:"m-post-actions",children:[{view:c(9),value:this.value.time}]},this.value.hasCommentsOrLikes&&{view:c(13),value:this.value},{tag:"a",className:"m-post-more",href:"#"}]})},h.composeVoice=function(){var a=this.value.target,b=this.value.actor;if(a)return e({fragment:!0,children:[{tag:"a",className:"m-post-actor",text:b.name,href:b.url},{tag:"span",className:"m-post-arrow",text:" ▶ "},{tag:"a",className:"m-post-target",text:a.name,href:a.url}]});return b&&e({tag:"a",className:"m-post-actor",text:b.name,href:b.url})},h.composeMessage=function(){return e({tag:"span",innerHTML:c(14)(this.value.message)})},h.compose=function(){return e({fragment:!0,children:[this.composeFrom(),this.composeContent()]})}},c[7]=function(a,b,c){var d=this,e=c(1),f=e.Base.createClass(),g=f.prototype;g.defaultBindingOptions={modelProp:"",viewProp:"value"},g.compose=function(){return e({})},Object.defineProperty(g,"value",{set:function(a){this._value=a,this.dom.innerHTML="",this.dom.appendChild(this.compose())},get:function(){return this._value}}),b.exports=f},c[8]=function(a,b,c){var d=this;1,1,1;var e=c(1),f=c(2),g=b.exports=c(7).createClass(),h=g.prototype;h.defaultClassName="m-post-attch m-image-block",h.compose=function(){var a=this.value,b=this.value.media;f.cls.toggle(this,"u-post-attch_multi-media",b&&b.length>1);return e({fragment:!0,children:[this.composeMedia(b),{tag:"div",className:"m-post-attch-content m-image-block-content",children:[{tag:"a",className:"m-post-attch-name",href:a.href,text:a.name,target:"_blank"},a.descitpion&&{tag:"div",className:"m-post-attch-desc",text:a.descitpion},a.caption&&{tag:"div",className:"m-post-attch-caption",text:a.caption}]},{tag:"div",className:"clear"}]})},h.composeMedia=function(a){if(a&&a.length&&a[0].src){f.cls.remove(this,"u-post-attch_without-media");var b=a.map(function(a){return e({tag:"a",href:a.href,className:"m-post-attch-media m-image-block-left",target:"_blank",children:[{tag:"img",className:"m-post-attch-icon-img",src:a.src}]})});return e({fragment:!0,children:b})}f.cls.add(this,"u-post-attch_without-media");return null}},c[9]=function(a,b,c){var d=this;1;var e=c(10),f=c(1),g=b.exports=f.Base.createClass(),h=g.prototype;h.defaultClassName="m-timestamp",Object.defineProperty(h,"value",{configurable:!0,set:function(a){this._value=a,this.dom.innerHTML=e(a)},get:function(){return this._value}})},c[10]=function(a,b,c){var d=this,e=c(11),f=60,g=3600,h=[e("dta:jan"),e("dta:feb"),e("dta:mar"),e("dta:apr"),e("dta:may"),e("dta:jun"),e("dta:jul"),e("dta:aug"),e("dta:sep"),e("dta:oct"),e("dta:nov"),e("dta:dec")];b.exports=function(a){var b=(+(new Date)-a.getTime())/1e3;if(b<f)return e("dtr:now");if(b<g){var c=b/f<<0;if(c===1)return e("dtr:1min");return e("dtr:nmin",{number:c})}var d=b/g<<0;if(d==1)return e("dtr:n1hr");if(d>12)return e("dtr:nhr",{number:d});return a.getDate()+" "+h[a.getMonth()]}},c[11]=function(a,b,c){var d=this,e=c(12);b.exports=function(a,b){var c=e[a];if(!c)return"";if(b)for(var d in b){var f=new RegExp("\\{"+d+"\\}","g");c=c.replace(f,b[d])}return c}},c[12]=function(a,b,c){var d=this;b.exports={"dtr:1min":"about a minute ago","dtr:nmin":"{number} minutes ago","dtr:1hr":"about an hour ago","dtr:n1hr":"1 hour ago","dtr:nhr":"{number} hours ago","dtr:now":"a few seconds ago","dta:jan":"Jan","dta:feb":"Feb","dta:mar":"Mar","dta:apr":"Apr","dta:may":"May","dta:jun":"Jun","dta:jul":"Jul","dta:aug":"Aug","dta:sep":"Sep","dta:oct":"Oct","dta:nov":"Nov","dta:dec":"Dec","pct:1cm":"1 comment","pct:ncm":"{count} comments","pct:1lk":"1 person","pct:nlk":"{count} people","str:more":"See more posts…","str:loading":"Loading"}},c[13]=function(a,b,c){function j(a){return a>1?f("pct:ncm",{count:a}):f("pct:1cm")}function i(a){return a>1?f("pct:nlk",{count:a}):f("pct:1lk")}var d=this;1;var e=c(1),f=c(11),g=b.exports=c(7).createClass(),h=g.prototype;h.defaultClassName="m-post-counts",h._createDom=function(a){this.dom=e({tag:"a"}),this.defaultClassName&&(this.className=this.defaultClassName)},h.compose=function(){var a=this.value.likes&&this.value.likes.count,b=this.value.comments&&this.value.comments.count;this.dom.href="#";return e({fragment:!0,children:[{tag:"div",className:"m-post-counts-nub"},{tag:"div",className:"m-post-counts-bar",children:[a&&{tag:"span",className:"m-post-counts-likes",text:i(a)},b&&{tag:"span",className:"m-post-counts-comments",text:j(b)}]}]})}},c[14]=function(a,b,c){function f(a,b,c){return a.replace(e,function(a){return b(RegExp.$1)+c(RegExp.$2)})}var d=this,e=/(.*?)\b((http:\/\/|www\.|http:\/\/www\.)[^ ]{2,300})\b/g;b.exports=function(a){var b=c(2);return f(a,b.escapeHTML,function(a){a=b.escapeHTML(a);return'<a href="'+a+'" target="_blank">'+a+"</a>"})}},c[15]=function(a,b,c){var d=this;1;var e=c(1),f=c(2),g=c(11),h=b.exports=e.Base.createClass(),i=h.prototype;i.defaultClassName="m-navbar-loading",i._createDom=function(){this.refs={},this.dom=e({tag:"div",className:i.defaultClassName,children:[{text:g("str:loading"),as:"text"},{text:" "},{tag:"i",className:"m-navbar-loading-loader"}]},this.refs)},Object.defineProperty(i,"text",{get:function(){return this.refs.text+""},set:function(a){var b=this.refs.text;b.parentNode.replaceChild(e({text:a,as:"text"},this.refs),b)}})},c[16]=function(a,b,c){var d=this;1;var e=c(1),f=c(2),g=c(11),h=b.exports=e.Base.createClass(),i=h.prototype;i.defaultClassName="m-navbar-more",i._createDom=function(){this.refs={},this.dom=e({tag:"a",href:"#",className:i.defaultClassName,children:[{text:g("str:more"),as:"text"},{text:" "},{tag:"i",className:"m-navbar-more-loader"}]},this.refs),this.addEventListener("click",f.bindOnce(function(a){a.preventDefault(),this.loading=!0},this))},Object.defineProperty(i,"loading",{get:function(){return f.cls.has(this,"m-navbar-more_loading")},set:function(a){var b=this.refs.text;b.parentNode.replaceChild(e({text:a?g("str:loading"):g("str:more"),as:"text"},this.refs),b),f.cls.toggle(this,"m-navbar-more_loading",!!a)}})},c[17]=function(a,b,c){var d=this,e=c(2),f=c(18),g=c(19),h=e.extend({},g,{model:c(20),fqlTable:"stream"});h.fetchHome=function(a,b){a=a||{},f.multiquery({posts:this.buildSELECT("all")+' WHERE filter_key = "others"'+"LIMIT "+a.limit||25,pages:c(22).buildSELECT("min")+" WHERE page_id IN (SELECT actor_id FROM #posts)"+" OR page_id IN (SELECT source_id FROM #posts)"+" OR page_id IN (SELECT tagged_ids FROM #posts)"+" OR page_id IN (SELECT target_id FROM #posts)",users:c(24).buildSELECT("min")+" WHERE uid IN (SELECT actor_id FROM #posts)"+" OR uid IN (SELECT source_id FROM #posts)"+" OR uid IN (SELECT tagged_ids FROM #posts)"+" OR uid IN (SELECT target_id FROM #posts)"},function(a){var d=h.createAndCacheModels("all",a.posts);c(22).createAndCacheModels("min",a.pages),c(24).createAndCacheModels("min",a.users),b(d)})},b.exports=h},c[18]=function(a,b,c){var d=this;d.query=function(a,b){FB.api({method:"fql.query",query:a},function(a){b(a)})},d.multiquery=function(a,b){console.log("multiquery:sql",a),FB.api({method:"fql.multiquery",queries:a},function(c){console.log("multiquery:result",a);var d={};c.forEach(function(a){d[a.name]=a.fql_result_set}),b(d)})},Object.defineProperty(d,"uid",{get:function(){return FB.getSession().uid}})},c[19]=function(a,b,c){var d=this,e={model:null,fqlTable:"",cacheProfiles:["min","all"],getFqlFields:function(a){return a==="min"?this.getFqlFieldsMinimal():this.getFqlFieldsAll()},getFqlFieldsMinimal:function(){return this.model.prototype.propNames},getFqlFieldsAll:function(){return this.model.prototype.propNames},buildSELECT:function(a){var b=this.getFqlFields(a);return"SELECT "+b.join(", ")+" FROM "+this.fqlTable},createAndCacheModels:function(a,b){var c=this.model,d=this.getFqlFields(a);return b.map(function(b){var e=new c(b);e.fieldSet=a;var f=this.cached(e.id);if(f){d.forEach(function(a){f[a]=e[a]}),a=="all"&&f.fieldSet=="min"&&(f.fieldSet=a);return f}this.cache[e.id]=e;return e},this)},cached:function(a){return this.cache[a]},cache:{}};b.exports=e},c[20]=function(a,b,c){var d=this,e=c(3),f=c(2),g=c(21).createClass(),h=g.prototype,i={};e.defineProperties(h,{post_id:i,app_id:i,source_id:i,updated_time:i,created_time:i,filter_key:i,attribution:i,actor_id:i,target_id:i,message:i,app_data:i,action_links:i,attachment:i,comments:i,likes:i,privacy:i,permalink:i,tagged_ids:i}),Object.defineProperties(h,{time:{configurable:!0,get:function(){return new Date(this.created_time*1e3)}},actor:{configurable:!0,get:function(){return c(19).cached(this.actor_id)}},target:{configurable:!0,get:function(){return c(19).cached(this.target_id)}},source:{configurable:!0,get:function(){return c(19).cached(this.source_id)}},hasCommentsOrLikes:{get:function(){return this.comments&&this.comments.count*1||this.likes&&this.likes.count*1}}}),f.alias.prop(h,"post_id","id"),h.propNames=h.propNames.slice(1),b.exports=g},c[21]=function(a,b,c){var d=this,e=c(3),f=e.Base.createClass(),g=f.prototype;g.fieldSet="min",b.exports=f},c[22]=function(a,b,c){var d=this,e=c(2),f=c(18),g=c(19),h=e.extend({},g,{model:c(23),fqlTable:"page",getFqlFieldsMinimal:function(){return["page_id","name","pic_square","username","page_url"]}});b.exports=h},c[23]=function(a,b,c){var d=this,e=c(3),f=c(2),g=c(21).createClass(),h=g.prototype,i={};e.defineProperties(h,{page_id:i,name:i,pic_small:i,pic_big:i,pic_square:i,pic:i,pic_large:i,page_url:i,fan_count:i,type:i,website:i,has_added_app:i,founded:i,company_overview:i,mission:i,products:i,location:i,parking:i,public_transit:i,hours:i}),f.alias.prop(h,"page_url","url"),f.alias.prop(h,"page_id","id"),h.propNames=h.propNames.slice(1),b.exports=g},c[24]=function(a,b,c){var d=this,e=c(2),f=c(18),g=c(19),h=e.extend({},g,{model:c(25),fqlTable:"user",getFqlFieldsMinimal:function(){return["uid","name","pic_square","username","profile_url"]}});b.exports=h},c[25]=function(a,b,c){var d=this,e=c(3),f=c(2),g=c(21).createClass(),h=g.prototype,i={};e.defineProperties(h,{uid:i,first_name:i,middle_name:i,last_name:i,name:i,pic_small:i,pic_big:i,pic_square:i,pic:i,affiliations:i,profile_update_time:i,timezone:i,religion:i,birthday:i,birthday_date:i,sex:i,hometown_location:i,meeting_sex:i,meeting_for:i,relationship_status:i,significant_other_id:i,political:i,current_location:i,activities:i,interests:i,is_app_user:i,music:i,tv:i,movies:i,books:i,quotes:i,about_me:i,hs_info:i,education_history:i,work_history:i,notes_count:i,wall_count:i,status:i,has_added_app:i,online_presence:i,locale:i,proxied_email:i,profile_url:i,email_hashes:i,pic_small_with_logo:i,pic_big_with_logo:i,pic_square_with_logo:i,pic_with_logo:i,allowed_restrictions:i,verified:i,profile_blurb:i,family:i,username:i,website:i,is_blocked:i,contact_email:i,email:i,third_party_id:i}),f.alias.prop(h,"profile_url","url"),f.alias.prop(h,"uid","id"),h.propNames=h.propNames.slice(1),b.exports=g},b(0)})()